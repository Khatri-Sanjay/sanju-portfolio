import{C as M,E as O,F as C,G as f,H as w,I as i,K as A,L as F,M as $,N as v,O as I,P as L}from"./chunk-U45NOCXC.js";import{a as b}from"./chunk-INXHUJVL.js";import{a as y}from"./chunk-YV3YPEEL.js";import{J as n,da as u,ia as E,ja as h,o as m,q as s,v as g}from"./chunk-HFT7XNML.js";import{a as l,b as p}from"./chunk-66YHNWRR.js";var N=class c{constructor(t){this.firestore=t}static API=b.baseApiUrl;getApi(){return c.API}http=h(y);COLLECTION_NAME="messages";createMessage(t){try{let e=f(this.firestore,this.COLLECTION_NAME),r=i(e),a=p(l({},t),{createdAt:new Date,updatedAt:new Date});return m(v(r,a)).pipe(g(()=>r.id),n(o=>(console.error("Error sending message:",o),s(()=>new Error(`Failed to send messages: ${o.message}`)))))}catch(e){return s(()=>new Error(`Failed to create blog: ${e.message}`))}}getAllMessages(t=1,e=10){try{let r=f(this.firestore,this.COLLECTION_NAME),a=[F("createdAt","desc"),A(e)];t>1&&a.push(I((t-1)*e));let o=$(r,...a);return O(o,{idField:"messageId"}).pipe(g(d=>d),n(d=>(console.error("Error fetching messages:",d),s(()=>new Error(`Failed to fetch messages: ${d.message}`)))))}catch(r){return s(()=>new Error(`Failed to fetch messages: ${r.message}`))}}getMessagesById(t){try{let e=i(this.firestore,`${this.COLLECTION_NAME}/${t}`);return C(e,{idField:"postId"}).pipe(g(r=>r),n(r=>(console.error("Error fetching message:",r),s(()=>new Error(`Failed to fetch message: ${r.message}`)))))}catch(e){return s(()=>new Error(`Failed to fetch message: ${e.message}`))}}updateMessage(t,e){try{let r=i(this.firestore,`${this.COLLECTION_NAME}/${t}`),a=p(l({},e),{updatedAt:new Date});return m(L(r,a)).pipe(n(o=>(console.error("Error updating message:",o),s(()=>new Error(`Failed to update message: ${o.message}`)))))}catch(r){return s(()=>new Error(`Failed to update message: ${r.message}`))}}deleteMessage(t){try{let e=i(this.firestore,`${this.COLLECTION_NAME}/${t}`);return m(w(e)).pipe(n(r=>(console.error("Error deleting message:",r),s(()=>new Error(`Failed to delete message: ${r.message}`)))))}catch(e){return s(()=>new Error(`Failed to delete message: ${e.message}`))}}static \u0275fac=function(e){return new(e||c)(E(M))};static \u0275prov=u({token:c,factory:c.\u0275fac,providedIn:"root"})};export{N as a};
